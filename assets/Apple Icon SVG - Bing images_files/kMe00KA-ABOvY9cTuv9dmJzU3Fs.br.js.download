var LGPopDomains;(function(n){function ri(n,i,r,u,l,k,d,g,nt,tt,it,rt,ut,ot,st,ct){var lt,at,pt,vt;if(tt===void 0&&(tt=!1),it===void 0&&(it=!1),rt===void 0&&(rt=!0),ut===void 0&&(ut=!0),ot===void 0&&(ot=!1),st===void 0&&(st=!1),ct===void 0&&(ct=!1),typeof Element.prototype.getBoundingClientRect=="function"){if(y=n.split("|"),s=r.split("|"),f=g.split("|"),e=nt.split("|"),v=u,ft=d,h=l,ii=tt,c=!h&&it,p=rt,o=ut,w=ot,b=st,ht=ct,lt=_ge("b_results"),et=lt&&lt.getBoundingClientRect?lt.getBoundingClientRect().top:156,ui(),at=fi(y,k),!LGUtility.isRenderFeature(t)||ei()||at.length==0||!bi())return yt(),null;if(pt=_ge(t+"CtaBtn"),vt=LGUtility.getInstVals(pt),LGUtility.instLogRender(t,a,vt.appNS,vt.kValue),i){yt();return}tt?oi(at):si(at)}}function ui(){var n={name:"Search",checkToAdd:function(){return!!_ge("uaseabox")},callback:function(){_ge("uaseabox").focus()}};u.push(n);f.push("Search");e.push("b_lgpd_srch");f.push("Images");e.push("b_lgpd_img");f.push("Videos");e.push("b_lgpd_vid")}function fi(n,i){for(var it,w,l,a=[],s=[],v=[],g=_d.querySelectorAll(".b_algo .b_attribution cite"+(ht?", .b_ans.b_mop":"")),nt=-1,tt=-1,y=[],d=[],r=0;r<u.length;r++)u[r].checkToAdd()&&(it={ad:null,algo:null,algoNum:-1,domain:u[r].name,faviconHostname:u[r].name,domainName:u[r].name,specialCase:!0,callback:u[r].callback},a.push(it),s.push(u[r].name));for(c&&!p&&ct(n,i,s,v,y),r=0;r<g.length;r++){var o=g[r],e=void 0,h=void 0;Lib.CssClass.contains(o,"b_mop")?(e=h=Lib.CssClass.contains(o,"b_imgans")?"Images":Lib.CssClass.contains(o,"b_vidAns")?"Videos":"",e!=""&&k(f,e,h,i,s,v,d,null,o,!0,r,!0)):(w=sj_ce("a"),w.href=o.innerText,b?(l=at(w.hostname),e=l&&l.length>=4?l[2]:"",h=gt(l)):(e=vt(w.hostname),h=e),k(n,e,h,i,s,v,d,null,o,!0,r))}return c&&p&&ct(n,i,s,v,y),lt(d,tt,nt,a),c&&!!y&&(Log.Log("LeftGutterModule",t,"AddBopTA",!1),lt(y,tt,nt,a)),a}function k(n,t,i,r,u,f,e,o,h,c,l,a){var y,v,p,b,w;c===void 0&&(c=!1);l===void 0&&(l=-1);a===void 0&&(a=!1);y=c?h:o;v=n.indexOf(t);(a||v>=0)&&f.indexOf(v)==-1&&y&&y.getBoundingClientRect&&u.indexOf(s[v])==-1&&(p=y.getBoundingClientRect(),b=p&&p.top>=0&&p.bottom<=_w.innerHeight,r&&b||(w=void 0,w=c?{ad:null,algo:h,algoNum:l,domain:t,faviconHostname:i,domainName:a?t:s[v],specialCase:!1,callback:null}:{ad:o,algo:null,algoNum:l,domain:t,faviconHostname:i,domainName:s[v],specialCase:!0,callback:function(){bt(o)}},e.push(w),u.push(w.domainName)),f.push(v))}function ct(n,t,i,r,u){var a=_d.querySelector(".b_adBottom"),e,h,l,f,o,c,s;if(a&&(e=a.querySelectorAll("li"),!!e&&!!e[0]))for(h=0;h<e.length;h++)(l=e[h],f=l.querySelector(".b_attribution cite"),!f||!f.textContent||f.textContent.split("/").length<=2)||(o=void 0,c=void 0,b?(s=at(f.textContent.split("/")[2]),o=s&&s.length>=4?s[2]:"",c=gt(s)):(o=vt(f.textContent.split("/")[2]),c=o),k(n,o,c,t,i,r,u,l,null))}function lt(n,t,i,r){for(var e,u,f=0;f<n.length;f++){if(e=n[f],u=e.domain,u==nt&&t>-1)r.splice(t,1),t=-1;else if(u==tt&&i>-1)continue;r.push(e);u==nt?i=r.length-1:u==tt&&(t=r.length-1)}}function at(n){return st.lastIndex=0,st.exec(n)}function vt(n){return n.indexOf("www.")==0?n.substring(4):y.indexOf(n)<0&&n.indexOf(".")>=0?n.substring(n.indexOf(".")+1):n}function ei(){var n,t,i;if(!!_d.querySelector(".pa_carousel"))return!0;if(n=_ge("b_results"),n)for(t=0;t<n.children.length;t++){if(i=n.children[t],Lib.CssClass.contains(i,"b_algo"))break;if(Lib.CssClass.contains(i,"b_ad"))return!0}return!1}function yt(){var n=_ge(t+"Container");n&&n.parentElement&&n.parentElement.removeChild(n)}function oi(n){for(var u,f,s,e=[],r=0;r<n.length;r++)u={imgUrl:null,desc:null},f=sj_ce("span"),f.innerText=n[r].domainName,u.desc=f,e[r]=u;for(LGWidget.initNavWidget(t,v,e),i=_ge(t+"Container"),s=function(i){var r=_ge(t+"_lgw_link"+i),u=_ge(t+"_lgw_fav"+i);u&&dt(n[i].domain,n[i].faviconHostname,u);o&&n[i].algo&&n[i].algo.innerText&&n[i].algo.innerText!=""&&r.setAttribute("data-url",n[i].algo.innerText);o&&n[i].ad&&n[i].ad.textContent&&n[i].ad.textContent!=""&&r.setAttribute("data-url",n[i].ad.textContent);w?wt(r,n[i]):sj_be(r,"click",function(){pt(n[i])})},r=0;r<n.length&&r<6;r++)s(r)}function si(n){var t=sj_ce("div",null,"b_lgpd_cont"),u=sj_ce("div",null,"b_lgpd_title"),f,r;for(u.innerText=v,t.appendChild(u),f=function(i){var r=sj_ce("div",null,"b_lgpd_site"),u=sj_ce("div",null,"b_lgpd_fav"),f=sj_ce("div",null,"b_lgpd_name");f.innerText=n[i].domainName;o&&n[i].algo&&n[i].algo.innerText&&n[i].algo.innerText!=""&&r.setAttribute("data-url",n[i].algo.innerText);o&&n[i].ad&&n[i].ad.innerText&&n[i].ad.innerText!=""&&r.setAttribute("data-url",n[i].ad.innerText);r.appendChild(u);r.appendChild(f);dt(n[i].domain,n[i].faviconHostname,u);w?wt(r,n[i]):sj_be(r,"click",function(){pt(n[i])});sj_be(r,"mouseenter",vi);sj_be(r,"mouseleave",yi);t.appendChild(r)},r=0;r<n.length;r++)f(r);sj_be(t,"mouseenter",pi);t&&i&&it&&ut&&(i.appendChild(t),it.insertBefore(i,ut))}function hi(n){if(!r){r=sj_ce("div",ti,"b_hide");var u=sj_ce("div",null,"b_lgpd_gt"),e=sj_ce("div",null,"b_lgpd_gti"),f=sj_ce("span");f.innerText=ft;u.appendChild(e);u.appendChild(f);r.appendChild(u);sj_be(r,"click",function(){si_ct(_ge("PopDomainsInstLink"));Log.Log("LeftGutterModule",t,"GoTopClick",!1);_w.scrollTo({top:0,behavior:"smooth"});ci()});i.appendChild(r)}li(n)}function ci(){Lib.CssClass.add(r,"b_hide")}function li(n){if(i&&i.getBoundingClientRect&&n&&n.getBoundingClientRect){var u=i.getBoundingClientRect(),t=n.getBoundingClientRect();r.style.top=(t.y-u.y+t.height/2-18).toString()+"px";Lib.CssClass.remove(r,"b_hide")}}function pt(n){var u=_ge(t+"CtaBtn"),i=LGUtility.getInstVals(u),r;if(LGUtility.instLogClick(t,a,i.appNS,i.kValue),Log.Log("LeftGutterModule",t+n.ad?"BOPAd":"","PillClick",!1,"domain",n.domain,"position",n.algoNum.toString()),n.specialCase){n.callback();return}h?(si_ct(n.algo),n.algo.click()):(r=kt(n.algo),bt(r))}function wt(n,t){var i=d(function(){ai(t)},ot);sj_be(n,"mouseenter",function(){g.reset();i.trigger()});sj_be(n,"mouseleave",function(){i.reset();g.trigger()})}function ai(n){var r=_ge("b_content"),t,i;(r.style.overflow="hidden",t=_ge("b_results"),t.style.position="relative",t.style.background="white",t.style.transition="top 1s",t.style.top="0px",i=n.algo?kt(n.algo):n.ad,i&&i.getBoundingClientRect)&&(l=l-(i.getBoundingClientRect().top-et),t.style.top=l+"px",sb_st(function(){Lib.CssClass.add(i,"b_lgpd_flash");sb_st(function(){Lib.CssClass.remove(i,"b_lgpd_flash")},3e3)},1e3))}function bt(n){var t=n&&n.getBoundingClientRect&&n.getBoundingClientRect();!h&&t&&t.y>=_w.innerHeight&&hi(n);n.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"});Lib.CssClass.add(n,"b_lgpd_flash");sb_st(function(){Lib.CssClass.remove(n,"b_lgpd_flash")},3e3)}function vi(){Lib.CssClass.add(i,"b_lgpd_hov")}function yi(){Lib.CssClass.remove(i,"b_lgpd_hov")}function kt(n){for(var t=n;t;){if(Lib.CssClass.contains(t,"b_algo")||Lib.CssClass.contains(t,"b_ans"))return t;t=t.parentElement}return n}function pi(){var i=_ge(t+"CtaBtn"),n=LGUtility.getInstVals(i);LGUtility.instLogHover(t,a,n.appNS,n.kValue)}function dt(n,t,i){var r=f.indexOf(n),u;if(r>=0){Lib.CssClass.add(i,e[r]);return}u="/favicon/hash?domain="+t;sj_ajax(u,{callback:function(n,t){var u,r=(u=t===null||t===void 0?void 0:t.request)===null||u===void 0?void 0:u.response,f,e;n&&t&&r!=""&&(f=r.indexOf("<!--<!"),e=f>-1?r.substring(0,f).trim():r,wi(e,i))}})}function wi(n,i){var u="/th?id=ODF."+n+"&pid=Api&w=42&h=42&dpr=1.5",r=sj_gx();r.open("HEAD",u,!0);r.onreadystatechange=function(){var n;r.readyState==4&&(r.status==404?(n=sj_ce("div",null,"b_lgpd_nofav"),i.appendChild(n)):(n=sj_ce("img",null,"b_favImg"),n.src=u,n.width=42,n.height=42,i.appendChild(n)))};r.onerror=function(){Log.Log("LeftGutterModule",t,"FaviconFailure",!1,"id",n)};r.send()}function bi(){return rt?parseInt(getComputedStyle(rt)[ni])>=160:!1}function gt(n){return n&&n.length>5?n[2]+(n[3]?n[3]:"")+(n[5]?n[5]:""):""}var t="LGPopDomains",a="LeftGutterWidget",nt="tripadvisor.com",tt="yelp.com",v="On this page:",ni=_G.RTL?"paddingRight":"paddingLeft",it=_d.querySelector("#b_content main"),rt=_ge("b_content"),ut=_ge("b_results"),i=sj_ce("div","b_lgpd",null),ti="b_lgpd_gtcont",d,g;i.setAttribute("data-priority","2");var y=[],s=[],h=!1,ft="Go to top",r,f=[],e=[],ii=!1,u=[],c=!1,p=!0,o=!0,w=!1,l=0,et,ot=250,b=!1,st=/^(?:(www|de|fr|in|ca|es|it|ko|ja|ru|zh|vi)\.)?([^:\/\n]+?)(?:(?=(\.(com|co|org|net|biz|gov))|(\.(de|fr|in|ca|es|it|ko|ja|ru|zh|vi|us|be|cz|dk|fi|gr|hu|jo|nl|no|pl|pt|se|sk|ag)$)))/igm,ht=!1;n.init=ri;d=function(n,t){var i=null;return{trigger:function(){var r=function(){i=null;n()};clearTimeout(i);i=sb_st(r,t)},reset:function(){clearTimeout(i)}}};g=d(function(){var n=_ge("b_results");n.style.top="0px";l=0},ot);sj_evt.fire("LGPopDomInit")})(LGPopDomains||(LGPopDomains={}))